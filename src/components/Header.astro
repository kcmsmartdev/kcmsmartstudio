---
interface menu {
  nombre: string;
  href: string;
}

const menuItems: menu[] = [
  { nombre: "Inicio", href: "/" },
  { nombre: "Sobre mi", href: "#sobremi" },
  { nombre: "Servicio", href: "#servicio" },
  { nombre: "Proyectos", href: "#proyectos" },
  { nombre: "Blog", href: "#" },
  { nombre: "Contacto", href: "#contacto" },
];
---

<header class="fixed top-0 left-0 w-full z-50 lg:hidden">
  <!-- Barra superior -->
  <div
    class="flex justify-between items-center px-6 py-4
              bg-black/40 backdrop-blur-md border-b border-white/10"
  >
    <a href="/" class="text-lg font-DelaGothicOne text-blanco"> KCMSMART </a>

    <button
      aria-label="Abrir menú"
      id="menuBtn"
      class="relative w-8 h-8 flex items-center justify-center z-[60]"
    >
      <!-- Icono Hamburguesa -->
      <svg
        id="iconOpen"
        xmlns="http://www.w3.org/2000/svg"
        class="w-7 h-7 text-white transition-opacity duration-300"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>

      <!-- Icono Cerrar -->
      <svg
        id="iconClose"
        xmlns="http://www.w3.org/2000/svg"
        class="absolute w-7 h-7 text-white opacity-0 transition-opacity duration-300"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M6 6l12 12M6 18L18 6"></path>
      </svg>
    </button>
  </div>

  <!-- Overlay -->
  <div
    id="overlay"
    class="fixed inset-0 bg-black/95 backdrop-blur-xl
              flex flex-col justify-center items-center
              gap-12
              opacity-0 pointer-events-none
              transition-all duration-500"
  >
    <ul class="flex flex-col gap-10 text-center">
      {
        menuItems.map((i) => (
          <li>
            <a
              href={i.href}
              class="text-3xl font-Poppins font-light text-white/80
                      transition-all duration-300 hover:text-primario"
            >
              {i.nombre}
            </a>
          </li>
        ))
      }
    </ul>

    <a
      href="#contacto"
      class="mt-6 px-8 py-4 bg-btn rounded-full
              font-Poppins font-semibold text-white"
    >
      Contáctame
    </a>
  </div>
</header>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("menuBtn");
    const overlay = document.getElementById("overlay");
    const iconOpen = document.getElementById("iconOpen");
    const iconClose = document.getElementById("iconClose");
    const body = document.body;

    let open = false;

    btn?.addEventListener("click", () => {
      open = !open;

      if (open) {
        overlay?.classList.remove("opacity-0", "pointer-events-none");
        overlay?.classList.add("opacity-100");
        body.classList.add("overflow-hidden");

        iconOpen?.classList.add("opacity-0");
        iconClose?.classList.remove("opacity-0");
      } else {
        overlay?.classList.add("opacity-0", "pointer-events-none");
        overlay?.classList.remove("opacity-100");
        body.classList.remove("overflow-hidden");

        iconOpen?.classList.remove("opacity-0");
        iconClose?.classList.add("opacity-0");
      }
    });

    document.querySelectorAll("#overlay a").forEach(link => {
      link.addEventListener("click", () => {
        overlay?.classList.add("opacity-0", "pointer-events-none");
        overlay?.classList.remove("opacity-100");
        body.classList.remove("overflow-hidden");

        iconOpen?.classList.remove("opacity-0");
        iconClose?.classList.add("opacity-0");

        open = false;
      });
    });
  });
</script>